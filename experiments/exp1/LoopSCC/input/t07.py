from cfg import CFG
from int import INT
from pfg import PFG
from summarizer import Summarizer

x, y = INT.define_int("x"), INT.define_int("y")

var_map = {"x": x, "y": y}

loop1 = CFG.define_loop([[x > 0]], [
    [
        ([[x == x]], [
            (
                (x, x - 1),
                (y, y + 2),
            )
        ]),
    ]
])

loop2 = CFG.define_loop([[y > 0]], [
    [
        ([[y == y]], [
            (
                (y, y - 1),
            )
        ]),
    ]
])

pfg = PFG(loop1)
summarizer = Summarizer(pfg)
summarizer.summarize()

pfg2 = PFG(loop2)
summarizer2 = Summarizer(pfg2)
summarizer2.summarize()
tests = [
    [(x, -667171), (y, 7874190), ],
    [(x, 3573577), (y, 6749393), ],
    [(x, -446485), (y, 4321651), ],
    [(x, -1480577), (y, -7819762), ],
    [(x, -1161316), (y, 7387043), ],
    [(x, -1188323), (y, 8434590), ],
    [(x, 5265898), (y, 7511445), ],
    [(x, 429814), (y, 90916), ],
    [(x, 3826106), (y, 4844459), ],
    [(x, 5566031), (y, 7358950), ],
    [(x, -2187022), (y, -4163470), ],
    [(x, 5816989), (y, 1272185), ],
    [(x, 3684577), (y, -2561147), ],
    [(x, 1101332), (y, 8055826), ],
    [(x, 1077017), (y, -4694854), ],
    [(x, 1644041), (y, -8594181), ],
    [(x, 9402514), (y, 1512977), ],
    [(x, 4601732), (y, -2141681), ],
    [(x, -6954944), (y, 7391390), ],
    [(x, 9056643), (y, -1641070), ],
    [(x, 3139016), (y, 4453496), ],
    [(x, 4966814), (y, 5910446), ],
    [(x, 1418602), (y, -570963), ],
    [(x, -8210242), (y, -2894059), ],
    [(x, 2135503), (y, -6239350), ],
    [(x, 4904099), (y, -3708994), ],
    [(x, -6259662), (y, -444518), ],
    [(x, 93617), (y, 519162), ],
    [(x, 8363515), (y, -9754517), ],
    [(x, 5553675), (y, 4604684), ],
    [(x, -2816583), (y, 8503329), ],
    [(x, 5819794), (y, -1856973), ],
    [(x, 6304855), (y, -532054), ],
    [(x, 8298325), (y, -9582814), ],
    [(x, -5218431), (y, 5389310), ],
    [(x, 9023910), (y, -6822247), ],
    [(x, -2140862), (y, 5758119), ],
    [(x, -2927187), (y, 7473867), ],
    [(x, -7481785), (y, 6002272), ],
    [(x, 9402301), (y, 1731644), ],
    [(x, 7838347), (y, 6530518), ],
    [(x, 5489767), (y, 8590921), ],
    [(x, 7827658), (y, -9525261), ],
    [(x, 8258255), (y, 7418617), ],
    [(x, 8748287), (y, -1243641), ],
    [(x, -3013506), (y, -6661392), ],
    [(x, -8061494), (y, 7010562), ],
    [(x, 9318121), (y, -5570735), ],
    [(x, -8740481), (y, 1714627), ],
    [(x, 3093950), (y, 4904511), ],
    [(x, 9681363), (y, -2985174), ],
    [(x, 7750638), (y, 4714035), ],
    [(x, -6075611), (y, 7968298), ],
    [(x, 6773464), (y, 2308749), ],
    [(x, -8164887), (y, 9289650), ],
    [(x, -3724185), (y, 5374742), ],
    [(x, -3407833), (y, -1712242), ],
    [(x, 6905010), (y, 5032211), ],
    [(x, 5783615), (y, -3127535), ],
    [(x, 359727), (y, 9251731), ],
    [(x, -7151846), (y, -8719938), ],
    [(x, -7260913), (y, -5004355), ],
    [(x, -3668377), (y, 4127557), ],
    [(x, -6796340), (y, -4562013), ],
    [(x, -6505672), (y, 6649283), ],
    [(x, 9304871), (y, 9130089), ],
    [(x, 9887520), (y, -896525), ],
    [(x, 6538360), (y, 4787875), ],
    [(x, 506029), (y, 7608147), ],
    [(x, 656535), (y, -5861297), ],
    [(x, -5620575), (y, 9493088), ],
    [(x, 369027), (y, -2949843), ],
    [(x, -7036645), (y, 2047775), ],
    [(x, 127609), (y, -382610), ],
    [(x, -9963373), (y, 2890852), ],
    [(x, -253286), (y, -5895013), ],
    [(x, -3300857), (y, -3508891), ],
    [(x, -9929928), (y, 2215308), ],
    [(x, 8569112), (y, -7846597), ],
    [(x, 5573382), (y, 1899775), ],
    [(x, 616397), (y, -767622), ],
    [(x, -1622057), (y, 6025798), ],
    [(x, -4390296), (y, 9131362), ],
    [(x, 7066525), (y, 3117698), ],
    [(x, -420652), (y, 3672911), ],
    [(x, -521512), (y, 2242667), ],
    [(x, -9821897), (y, 9921027), ],
    [(x, -280682), (y, -5584962), ],
    [(x, 4231984), (y, -5460158), ],
    [(x, -92741), (y, 2930614), ],
    [(x, -846915), (y, 2238230), ],
    [(x, 3750451), (y, -7492179), ],
    [(x, 7705364), (y, -3707233), ],
    [(x, -4570174), (y, -3697583), ],
    [(x, -2049208), (y, -9381726), ],
    [(x, 3163347), (y, -7264449), ],
    [(x, -587601), (y, 3421617), ],
    [(x, -2073017), (y, -7414725), ],
    [(x, 9372886), (y, 3043419), ],
    [(x, 8574086), (y, 3921299), ],
]
for test in tests:
    res1 = summarizer.solve(test)
    # test: [(x, -987952982), (y, 2007419650)]
    # res1: [('x', -987952982), ('y', 2007419650)]
    x_val = res1[0][1]
    y_val = res1[1][1]

    input2 = [(y, y_val)]

    result = summarizer2.solve(input2)
    y_val = result[0][1]

    print(f"x = {x_val}")
    print(f"y = {y_val}")

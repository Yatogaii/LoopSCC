from cfg import CFG
from int import INT
from pfg import PFG
from summarizer import Summarizer

x, det = INT.define_int("x"), INT.define_int("det")

loop = CFG.define_loop([[x < 100]], [
    [
        ([[det == 1]], [
            (
                (x, x + 1),
            )
        ]),
        ([[det != 1]], [
            (
                (x, x + 1),
            )
        ]),
    ]
])

pfg = PFG(loop)
summarizer = Summarizer(pfg)
summarizer.summarize()
tests = [
    [(x, 9950460), (det, 1), ],
    [(x, -760705), (det, 1), ],
    [(x, -8020425), (det, 1), ],
    [(x, -9871332), (det, 1), ],
    [(x, 4178019), (det, 1), ],
    [(x, 6303200), (det, 1), ],
    [(x, -6814678), (det, 1), ],
    [(x, 3410201), (det, 1), ],
    [(x, 1491890), (det, 1), ],
    [(x, 552262), (det, 1), ],
    [(x, 7936251), (det, 1), ],
    [(x, -9327337), (det, 1), ],
    [(x, -7716713), (det, 1), ],
    [(x, -84821), (det, 1), ],
    [(x, -6219603), (det, 1), ],
    [(x, 8910696), (det, 1), ],
    [(x, 9736838), (det, 1), ],
    [(x, 7793985), (det, 1), ],
    [(x, -504771), (det, 1), ],
    [(x, -9452106), (det, 1), ],
    [(x, 7446041), (det, 1), ],
    [(x, 4397972), (det, 1), ],
    [(x, -2663662), (det, 1), ],
    [(x, 6300272), (det, 1), ],
    [(x, 221842), (det, 1), ],
    [(x, -6385814), (det, 1), ],
    [(x, -940858), (det, 1), ],
    [(x, 2288356), (det, 1), ],
    [(x, -9558559), (det, 1), ],
    [(x, -1292609), (det, 1), ],
    [(x, 3457564), (det, 1), ],
    [(x, -2701921), (det, 1), ],
    [(x, 3650477), (det, 1), ],
    [(x, -1569713), (det, 1), ],
    [(x, 6241449), (det, 1), ],
    [(x, 1057149), (det, 1), ],
    [(x, -2667149), (det, 1), ],
    [(x, 2320178), (det, 1), ],
    [(x, -2582638), (det, 1), ],
    [(x, -7483281), (det, 1), ],
    [(x, -789259), (det, 1), ],
    [(x, 6855822), (det, 1), ],
    [(x, 5800425), (det, 1), ],
    [(x, 2793981), (det, 1), ],
    [(x, -2064861), (det, 1), ],
    [(x, -8175996), (det, 1), ],
    [(x, -3587612), (det, 1), ],
    [(x, 6948345), (det, 1), ],
    [(x, 4137440), (det, 1), ],
    [(x, 6094992), (det, 1), ],
    [(x, -6255937), (det, 0), ],
    [(x, -9930886), (det, 0), ],
    [(x, -9619886), (det, 0), ],
    [(x, 9266567), (det, 0), ],
    [(x, -7811489), (det, 0), ],
    [(x, -7640582), (det, 0), ],
    [(x, -2805493), (det, 0), ],
    [(x, -2287194), (det, 0), ],
    [(x, -3179793), (det, 0), ],
    [(x, -2453990), (det, 0), ],
    [(x, 3312013), (det, 0), ],
    [(x, 2055902), (det, 0), ],
    [(x, -5533190), (det, 0), ],
    [(x, -8601975), (det, 0), ],
    [(x, 4946743), (det, 0), ],
    [(x, -2059845), (det, 0), ],
    [(x, -6366941), (det, 0), ],
    [(x, 9879213), (det, 0), ],
    [(x, 1889151), (det, 0), ],
    [(x, 1287551), (det, 0), ],
    [(x, 5613731), (det, 0), ],
    [(x, 4177060), (det, 0), ],
    [(x, -1076458), (det, 0), ],
    [(x, 594166), (det, 0), ],
    [(x, 5469516), (det, 0), ],
    [(x, -3909624), (det, 0), ],
    [(x, -6610197), (det, 0), ],
    [(x, 9444934), (det, 0), ],
    [(x, -4925686), (det, 0), ],
    [(x, -6169942), (det, 0), ],
    [(x, -5120801), (det, 0), ],
    [(x, 8612138), (det, 0), ],
    [(x, -7028549), (det, 0), ],
    [(x, 1252746), (det, 0), ],
    [(x, -768770), (det, 0), ],
    [(x, 5635527), (det, 0), ],
    [(x, 8350401), (det, 0), ],
    [(x, 4194160), (det, 0), ],
    [(x, -2947137), (det, 0), ],
    [(x, -7669888), (det, 0), ],
    [(x, 6345071), (det, 0), ],
    [(x, -5264554), (det, 0), ],
    [(x, -5312916), (det, 0), ],
    [(x, -4999266), (det, 0), ],
    [(x, -726116), (det, 0), ],
    [(x, 7066499), (det, 0), ],
    [(x, -8701720), (det, 0), ],
    [(x, 4055305), (det, 0), ],
    [(x, -5062954), (det, 0), ],
    [(x, 5585327), (det, 0), ],
]
for test in tests:
    result = summarizer.solve(test)
    x_val = result[0][1]
    print(f"x = {x_val}")

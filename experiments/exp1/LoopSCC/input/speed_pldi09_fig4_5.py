from cfg import CFG
from int import INT
from spath_graph import SPath_Graph
from summarizer import Summarizer

i, dir = INT.define_int("i"), INT.define_int("dir")

loop = CFG.define_loop([[i > 0, i < 1000000]], [
    [
        ([[dir == 1]], [
            (
                (i, i + 1),
            )
        ]),
        ([[dir != 1]], [
            (
                (i, i - 1),
            )
        ]),
    ]
])

spg = SPath_Graph(loop)
summarizer = Summarizer(spg)
summarizer.summarize()
tests = [
    [(i, 414790), (dir, 1), ],
    [(i, 532168), (dir, 1), ],
    [(i, 627764), (dir, 1), ],
    [(i, 574041), (dir, 1), ],
    [(i, 40045), (dir, 1), ],
    [(i, 70446), (dir, 1), ],
    [(i, 641880), (dir, 1), ],
    [(i, 129134), (dir, 1), ],
    [(i, 993998), (dir, 1), ],
    [(i, 462798), (dir, 1), ],
    [(i, 111474), (dir, 1), ],
    [(i, 141393), (dir, 1), ],
    [(i, 371210), (dir, 1), ],
    [(i, 802458), (dir, 1), ],
    [(i, 193825), (dir, 1), ],
    [(i, 439331), (dir, 1), ],
    [(i, 675822), (dir, 1), ],
    [(i, 146325), (dir, 1), ],
    [(i, 948731), (dir, 1), ],
    [(i, 296525), (dir, 1), ],
    [(i, 192160), (dir, 1), ],
    [(i, 925066), (dir, 1), ],
    [(i, 819043), (dir, 1), ],
    [(i, 471044), (dir, 1), ],
    [(i, 913563), (dir, 1), ],
    [(i, 57431), (dir, 1), ],
    [(i, 235494), (dir, 1), ],
    [(i, 210603), (dir, 1), ],
    [(i, 196881), (dir, 1), ],
    [(i, 425233), (dir, 1), ],
    [(i, 356801), (dir, 1), ],
    [(i, 170154), (dir, 1), ],
    [(i, 87722), (dir, 1), ],
    [(i, 548252), (dir, 1), ],
    [(i, 905875), (dir, 1), ],
    [(i, 830334), (dir, 1), ],
    [(i, 829509), (dir, 1), ],
    [(i, 361728), (dir, 1), ],
    [(i, 158556), (dir, 1), ],
    [(i, 293183), (dir, 1), ],
    [(i, 432205), (dir, 1), ],
    [(i, 211529), (dir, 1), ],
    [(i, 523222), (dir, 1), ],
    [(i, 904524), (dir, 1), ],
    [(i, 999744), (dir, 1), ],
    [(i, 684444), (dir, 1), ],
    [(i, 199000), (dir, 1), ],
    [(i, 135857), (dir, 1), ],
    [(i, 309904), (dir, 1), ],
    [(i, 805663), (dir, 1), ],
    [(i, 830718), (dir, 0), ],
    [(i, 73517), (dir, 0), ],
    [(i, 651434), (dir, 0), ],
    [(i, 253159), (dir, 0), ],
    [(i, 316463), (dir, 0), ],
    [(i, 167205), (dir, 0), ],
    [(i, 258977), (dir, 0), ],
    [(i, 770371), (dir, 0), ],
    [(i, 958772), (dir, 0), ],
    [(i, 651972), (dir, 0), ],
    [(i, 791487), (dir, 0), ],
    [(i, 307152), (dir, 0), ],
    [(i, 554909), (dir, 0), ],
    [(i, 706470), (dir, 0), ],
    [(i, 243442), (dir, 0), ],
    [(i, 765974), (dir, 0), ],
    [(i, 366063), (dir, 0), ],
    [(i, 431529), (dir, 0), ],
    [(i, 81164), (dir, 0), ],
    [(i, 6769), (dir, 0), ],
    [(i, 551751), (dir, 0), ],
    [(i, 272869), (dir, 0), ],
    [(i, 402139), (dir, 0), ],
    [(i, 120060), (dir, 0), ],
    [(i, 220659), (dir, 0), ],
    [(i, 702841), (dir, 0), ],
    [(i, 622339), (dir, 0), ],
    [(i, 649018), (dir, 0), ],
    [(i, 329844), (dir, 0), ],
    [(i, 730860), (dir, 0), ],
    [(i, 5160686), (dir, 0), ],
    [(i, 1226749), (dir, 0), ],
    [(i, -6284279), (dir, 0), ],
    [(i, -6190209), (dir, 0), ],
    [(i, 7793103), (dir, 0), ],
    [(i, -1494943), (dir, 0), ],
    [(i, -4748345), (dir, 0), ],
    [(i, -4620396), (dir, 0), ],
    [(i, -9629932), (dir, 0), ],
    [(i, -1759905), (dir, 0), ],
    [(i, 8783981), (dir, 0), ],
    [(i, -7652939), (dir, 0), ],
    [(i, -9355760), (dir, 0), ],
    [(i, -3574719), (dir, 0), ],
    [(i, -2268173), (dir, 0), ],
    [(i, -1579641), (dir, 0), ],
    [(i, -7702853), (dir, 0), ],
    [(i, 8963089), (dir, 0), ],
    [(i, -300356), (dir, 0), ],
    [(i, 7469016), (dir, 0), ],
]
for test in tests:
    result = summarizer.solve(test)
    i_val = result[0][1]
    print(f"i = {i_val}")

from cfg import CFG
from int import INT
from pfg import PFG
from summarizer import Summarizer

x, det = INT.define_int("x"), INT.define_int("det")

loop = CFG.define_loop([[x < 100]], [
    (
        (x, x + 1),
    ),
    [
        ([[x < 100, det != 0]], [
            (
                (x, 100),
            )
        ]),
        ([[x >= 100], [det == 0]], [
            (
            )
        ]),
    ],
])

pfg = PFG(loop)
summarizer = Summarizer(pfg)
summarizer.summarize()
tests = [
    [(x, -267056), (det, 1), ],
    [(x, 9297296), (det, 1), ],
    [(x, -9818624), (det, 1), ],
    [(x, -5068245), (det, 1), ],
    [(x, -5477462), (det, 1), ],
    [(x, 5058754), (det, 1), ],
    [(x, -779380), (det, 1), ],
    [(x, -6178451), (det, 1), ],
    [(x, 1399656), (det, 1), ],
    [(x, -9758760), (det, 1), ],
    [(x, 9267334), (det, 1), ],
    [(x, -4104093), (det, 1), ],
    [(x, -4520936), (det, 1), ],
    [(x, 1368232), (det, 1), ],
    [(x, 5167400), (det, 1), ],
    [(x, 9477837), (det, 1), ],
    [(x, -2424274), (det, 1), ],
    [(x, 8810929), (det, 1), ],
    [(x, -4169424), (det, 1), ],
    [(x, -2955676), (det, 1), ],
    [(x, -288879), (det, 1), ],
    [(x, -8269342), (det, 1), ],
    [(x, 8983741), (det, 1), ],
    [(x, -1804738), (det, 1), ],
    [(x, -7228455), (det, 1), ],
    [(x, -1087780), (det, 1), ],
    [(x, -280009), (det, 1), ],
    [(x, 1128597), (det, 1), ],
    [(x, -1802344), (det, 1), ],
    [(x, 8090167), (det, 1), ],
    [(x, 9429132), (det, 1), ],
    [(x, 4905891), (det, 1), ],
    [(x, 4556861), (det, 1), ],
    [(x, -3531805), (det, 1), ],
    [(x, -6195575), (det, 1), ],
    [(x, -8537754), (det, 1), ],
    [(x, 2865405), (det, 1), ],
    [(x, 5643400), (det, 1), ],
    [(x, 866866), (det, 1), ],
    [(x, -8323251), (det, 1), ],
    [(x, 7119683), (det, 1), ],
    [(x, 3256324), (det, 1), ],
    [(x, 7016312), (det, 1), ],
    [(x, 7666934), (det, 1), ],
    [(x, -9110852), (det, 1), ],
    [(x, 8186542), (det, 1), ],
    [(x, -1941681), (det, 1), ],
    [(x, 3662562), (det, 1), ],
    [(x, 5713206), (det, 1), ],
    [(x, 6039088), (det, 1), ],
    [(x, -1822442), (det, 0), ],
    [(x, 9975206), (det, 0), ],
    [(x, -1115297), (det, 0), ],
    [(x, -9597235), (det, 0), ],
    [(x, 4643809), (det, 0), ],
    [(x, -9482712), (det, 0), ],
    [(x, 4149930), (det, 0), ],
    [(x, -5817896), (det, 0), ],
    [(x, -5446531), (det, 0), ],
    [(x, -8176121), (det, 0), ],
    [(x, -4422350), (det, 0), ],
    [(x, -1903414), (det, 0), ],
    [(x, -1946109), (det, 0), ],
    [(x, 8738515), (det, 0), ],
    [(x, -6949805), (det, 0), ],
    [(x, 2026418), (det, 0), ],
    [(x, 6387075), (det, 0), ],
    [(x, -4597216), (det, 0), ],
    [(x, 5048891), (det, 0), ],
    [(x, -6438502), (det, 0), ],
    [(x, 1149972), (det, 0), ],
    [(x, -1365292), (det, 0), ],
    [(x, 8136287), (det, 0), ],
    [(x, -273203), (det, 0), ],
    [(x, 434574), (det, 0), ],
    [(x, 5600547), (det, 0), ],
    [(x, -511332), (det, 0), ],
    [(x, 3114426), (det, 0), ],
    [(x, -9599534), (det, 0), ],
    [(x, -8353422), (det, 0), ],
    [(x, -9770011), (det, 0), ],
    [(x, -1302512), (det, 0), ],
    [(x, 772682), (det, 0), ],
    [(x, -504930), (det, 0), ],
    [(x, 9397637), (det, 0), ],
    [(x, -8361825), (det, 0), ],
    [(x, -7723258), (det, 0), ],
    [(x, -8509022), (det, 0), ],
    [(x, -9245206), (det, 0), ],
    [(x, -7889862), (det, 0), ],
    [(x, -5701139), (det, 0), ],
    [(x, 1753293), (det, 0), ],
    [(x, -2896386), (det, 0), ],
    [(x, -9821689), (det, 0), ],
    [(x, 3173931), (det, 0), ],
    [(x, 9943715), (det, 0), ],
    [(x, 4724236), (det, 0), ],
    [(x, 1650703), (det, 0), ],
    [(x, 6607829), (det, 0), ],
    [(x, -1338243), (det, 0), ],
]
for test in tests:
    result = summarizer.solve(test)
    x_val = result[0][1]
    print(f"x = {x_val}")
